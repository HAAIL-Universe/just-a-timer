info:
  title: Just a Timer API
  version: 1.0.0
  description: Backend API for animated timer application with presets and completion feedback

paths:
  /timers:
    post:
      summary: Create a new timer session
      description: Initialize a timer with duration in milliseconds
      auth: none
      request:
        body:
          type: object
          properties:
            duration_ms:
              type: integer
              description: Timer duration in milliseconds
              example: 300000
      responses:
        201:
          description: Timer created
          schema:
            $ref: '#/components/schemas/Timer'

  /timers/{id}:
    get:
      summary: Get timer state
      description: Fetch current timer elapsed time and face mood state
      auth: none
      parameters:
        - name: id
          in: path
          required: true
          type: string
      responses:
        200:
          description: Timer state
          schema:
            $ref: '#/components/schemas/Timer'
    
    delete:
      summary: Cancel timer
      description: Stop and remove active timer
      auth: none
      parameters:
        - name: id
          in: path
          required: true
          type: string
      responses:
        204:
          description: Timer cancelled

  /timers/{id}/pause:
    post:
      summary: Pause timer
      description: Temporarily halt timer without cancelling
      auth: none
      parameters:
        - name: id
          in: path
          required: true
          type: string
      responses:
        200:
          description: Timer paused
          schema:
            $ref: '#/components/schemas/Timer'

  /timers/{id}/resume:
    post:
      summary: Resume timer
      description: Continue paused timer
      auth: none
      parameters:
        - name: id
          in: path
          required: true
          type: string
      responses:
        200:
          description: Timer resumed
          schema:
            $ref: '#/components/schemas/Timer'

  /presets:
    get:
      summary: List quick presets
      description: Fetch default timer presets (5min, 15min, 1hr)
      auth: none
      responses:
        200:
          description: Preset list
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Preset'

schemas:
  Timer:
    type: object
    properties:
      id:
        type: string
        description: Unique timer identifier
      duration_ms:
        type: integer
        description: Original duration in milliseconds
      elapsed_ms:
        type: integer
        description: Time elapsed so far in milliseconds
      state:
        type: string
        enum: [active, paused, completed]
        description: Current timer state
      mood:
        type: string
        enum: [calm, anxious, celebratory]
        description: Face mood based on time remaining
      created_at:
        type: string
        format: datetime
        description: Timer creation timestamp

  Preset:
    type: object
    properties:
      id:
        type: string
        description: Preset identifier
      label:
        type: string
        description: Display label (e.g., '5 min')
      duration_ms:
        type: integer
        description: Duration in milliseconds